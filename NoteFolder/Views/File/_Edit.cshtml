@model FileVM

@* Very similar to Create. Consider whether merging them would save time, or whether they might need to diverge in the future.*@
@if(!Model.IsRootFolder) {
	<div id='editForm'>
		@using(Ajax.BeginForm("Edit", "File", new AjaxOptions { OnSuccess = $"checkAjaxSuccess(data, 'editForm')" })) {
			@Html.ValidationMessage("Name")
			@Html.Label("Name")
			@Html.TextBox("Name")
			@Html.Label("Description")
			@Html.TextBox("Description")
			if(!Model.IsFolder) {
				@Html.Label("Text")
				@Html.TextArea("Text")
			}
			@Html.Hidden("Path")
			@Html.Hidden("ExistingID")
			<input type="submit" value="Edit" />
		}
		@{
			string deleteMsg;
			if(Model.IsFolder) {
				if(Model.DirectChildren?.Count > 0){
					deleteMsg = "Really delete this folder and everything in it?";
				}
				else{
					deleteMsg = "Really delete this folder?";
				}
			}
			else {
				deleteMsg = "Really delete this note?";
			}
		}
		@using(Ajax.BeginForm("Delete", "File", new AjaxOptions { OnSuccess = "checkAjaxSuccess(data, 'editForm')" },
			new { onclick = $"return confirm('{deleteMsg}');" }))
		{
			@Html.Hidden("Path")
			@Html.Hidden("ExistingID")
			<input type="submit" value="Delete" />
		}
	</div>
}
